<div class="container my-5">
  <h2 class="text-center mb-5 fw-bold">üõç My Cart</h2>

  <!-- Empty Cart -->
  @if (cardService.getCarditem().length == 0) {
    <div class="text-center py-5">
      <img src="https://cdn-icons-png.flaticon.com/512/2038/2038854.png" alt="Empty Cart" width="120" class="mb-3 opacity-75">
      <h4 class="text-muted">Your cart is empty</h4>
      <button class="btn btn-primary mt-3" routerLink="/">‚¨Ö Continue Shopping</button>
    </div>
  }

  <!-- Cart Items as Cards -->
  <div class="row g-4">
    @for (item of cardService.getCarditem(); track item.id) {
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm cart-card">
          <img [src]="item.image" class="card-img-top p-3" alt="{{ item.title }}" />

          <div class="card-body d-flex flex-column">
            <h6 class="card-title fw-semibold">{{ item.title }}</h6>
            <p class="text-muted small mb-1">{{ item.category }}</p>
            <p class="text-success fw-bold">{{ item.price | currency }}</p>

            <!-- Quantity Controls -->
            <div class="d-flex align-items-center my-2">
              <button class="btn btn-outline-secondary btn-sm" (click)="cardService.decrementqty(item)">‚Äì</button>
              <input type="text" [value]="item.qty" class="form-control text-center mx-2" style="width: 60px" readonly />
              <button class="btn btn-outline-secondary btn-sm" (click)="cardService.incrementqty(item)">+</button>
            </div>

            <!-- Subtotal -->
            <div class="mt-auto d-flex justify-content-between align-items-center">
              <span class="fw-bold">{{ item.price * item.qty | currency }}</span>
              <div class="d-flex gap-2">
                <input
                  type="checkbox"
                  class="form-check-input"
                  [checked]="item.is_select"
                  (change)="cardService.selectCarditem(item)"
                />
                <button class="btn btn-outline-danger btn-sm" (click)="cardService.removecarditem(item)">
                  üóë
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    }
  </div>

  <!-- Checkout Section -->
  @if (cardService.getCarditem().length > 0) {
    <div class="checkout-box mt-5 p-4 bg-dark text-white rounded shadow-lg">
      <div class="d-flex justify-content-between align-items-center">
        <h4 class="mb-0">Total: <span class="text-warning">{{ cardService.getcardtotal() | currency }}</span></h4>
        <button class="btn btn-lg btn-warning text-dark fw-bold" routerLink="/paynow">
          ‚úÖ Proceed to Checkout
        </button>
      </div>
    </div>
  }
</div>
